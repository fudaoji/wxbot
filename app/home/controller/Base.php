<?php
/**
 * Created by PhpStorm.
 * Script Name: Base.php
 * Create: 2020/9/6 下午9:14
 * Description:
 * Author: fudaoji<fdj@kuryun.cn>
 */

namespace app\home\controller;

use app\common\controller\BaseCtl;

class Base extends BaseCtl
{
    protected $module = 'home';
    /**
     * @var \app\common\model\Base
     */
    protected $model;
    protected $layout = 'layout/base';
    protected $pk = 'id';

    public function initialize()
    {
        parent::initialize(); // TODO: Change the autogenerated stub
        $this->checkClose();
        $theme = config('system.site.home_theme');
        $view_config = config('view');
        $view_config['theme'] = $theme;
        config(['view' => $view_config]);
        $this->assign('theme', $theme);
        $this->assign('account_id', session(SESSION_AID));
    }

    private function checkClose()
    {
        if(config('system.site.close')){
            die("<div style='margin: 300px;text-align: center;font-size: 2em;'>".config('system.site.close_reason')."</div>");
        }
    }
}